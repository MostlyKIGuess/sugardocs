<aside id="floating-control">
    <span id="theme-switch">
        <i class="svg-icon light" icon-name="sun" aria-hidden="true"></i>
        <i class="svg-icon dark" icon-name="moon" aria-hidden="true"></i>
    </span>
</aside>

    
<script>
    function setThemeIcon(theme) {
        if (theme === 'dark') {
            document.getElementById('theme-switch').classList.add('dark');
            document.getElementById('theme-switch').classList.remove('light');
        } else {
            document.getElementById('theme-switch').classList.add('light');
            document.getElementById('theme-switch').classList.remove('dark');
        }
    }
    
    function setTheme(theme, setIcon) {
        if (setIcon) {
            setThemeIcon(theme);
        }
        
        if (theme == 'dark') {
            document.body.classList.remove('theme-light');
            document.body.classList.add('theme-dark');
        } else {
            document.body.classList.add('theme-light');
            document.body.classList.remove('theme-dark');
        }
    }
    
    let theme = window.localStorage.getItem('site-theme') || "light";
    // Convert any "auto" to "light" for backward compatibility
    if (theme === "auto") {
        theme = "light";
    }
    
    setTheme(theme, true);
    window.theme = theme;
    window.localStorage.setItem('site-theme', theme);

    document.getElementById('theme-switch').addEventListener('click', function() {
        let theme = window.theme === 'dark' ? 'light' : 'dark';
        setTheme(theme, true);
        window.localStorage.setItem('site-theme', theme);
        window.theme = theme;
    });
</script>

<style>
    #floating-control {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        z-index: 100;
    }
    
    #theme-switch {
        cursor: pointer;
        background: var(--background-secondary);
        border-radius: 50%;
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    #theme-switch i {
        font-size: 1.2rem;
    }
    
    #theme-switch.light .dark,
    #theme-switch.dark .light {
        display: none;
    }
</style>